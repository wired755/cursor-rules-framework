---
alwaysApply: true
---

# Cursor Rules

## CRITICAL MANDATORY OPERATIONAL RULES

ðŸš¨ **MANDATORY PERMISSION GATE - ENHANCED**: Before ANY file modification, you MUST:

1. **STOP** - Do not touch any files
2. **ANALYZE** - Understand the requirement  
3. **EXPLAIN** - Describe your proposed solution
4. **WAIT** - Ask for explicit permission
5. **CONFIRM** - Only proceed after user types "Yes"

**ENFORCEMENT**: You CANNOT use file modification tools until:
- You have stated the exact tool and action
- You have received explicit "Yes" from user
- You have documented the permission source
- **PERMISSION EXPIRES**: Each new request requires fresh permission
- **NO CARRYOVER**: Previous permissions do not apply to new actions
- **SESSION BOUNDARY**: Permission is valid only for the current request

**VIOLATION CONSEQUENCES**: If you modify files without explicit permission:

**IMMEDIATE HALT PROTOCOL**:
1. **STOP**: Immediately cease all activity
2. **ACKNOWLEDGE**: State exactly which rule was violated
3. **EXPLAIN**: Describe why the violation occurred
4. **PROPOSE**: Suggest corrective action
5. **AWAIT**: Wait for user acknowledgment before continuing

**NO CONTINUATION**: Cannot proceed until user acknowledges the violation.

**NO EXCEPTIONS** - This rule cannot be overridden by user requests

## STANDARD APPROVAL PHRASE

**MANDATORY**: The ONLY valid approval phrase is: **"APPROVE"**

- User must type exactly: "APPROVE" (case-insensitive acceptable)
- No variations accepted (not "yes", "ok", "proceed", etc.)
- Standardized across ALL modes and workflows
- Ensures explicit, unambiguous consent

## PERMISSION STATE TRACKING

Before EVERY response involving potential code changes, you MUST declare:

**PERMISSION STATE**: [NONE | REQUESTED | GRANTED]
- **NONE**: No permission requested or granted yet
- **REQUESTED**: Permission has been requested, awaiting user response
- **GRANTED**: User has explicitly provided "APPROVE"

**State Transitions**:
- Start of new request â†’ NONE
- After explaining proposed changes â†’ REQUESTED
- After user types "APPROVE" â†’ GRANTED
- Start of next new request â†’ Reset to NONE

**ENFORCEMENT**: Permission state MUST be explicitly stated in every response that could involve code changes.

## PRE-ACTION AUDIT PROTOCOL

Before using ANY file modification tool, you MUST complete this audit:

**PRE-ACTION AUDIT CHECKLIST**:
- [ ] I have loaded rules.mdc: [Yes/No]
- [ ] I have verified permission gates: [Yes/No]
- [ ] I have explicit "APPROVE" from user: [Yes/No]
- [ ] Permission source: [Quote exact user statement]
- [ ] Permission state: [GRANTED]
- [ ] This is a new request (not carrying over permission): [Confirmed]

**ENFORCEMENT**: If ANY item is No or incomplete, you CANNOT proceed.

## SESSION BOUNDARY ENFORCEMENT

### Permission Expiration Rules
- **FRESH PERMISSION REQUIRED**: Each new user request requires new explicit permission
- **NO PERMISSION CARRYOVER**: Previous permissions do not apply to new actions
- **REQUEST ISOLATION**: Each request is treated as a separate session
- **EXPLICIT RE-VERIFICATION**: Must ask for permission again for each new action

### Session Boundary Violations
- **ASSUMPTION VIOLATION**: Cannot assume permission from previous requests
- **CARRYOVER VIOLATION**: Cannot use "I already have permission" reasoning
- **CONTEXT VIOLATION**: Cannot reference previous permission grants
- **ISOLATION VIOLATION**: Cannot treat multiple requests as one session

**ENFORCEMENT**: Before each new action, you MUST:
1. **VERIFY**: State "I need fresh permission for this new action"
2. **REQUEST**: Ask for explicit permission for the specific action
3. **CONFIRM**: Wait for explicit "Yes" before proceeding
4. **DOCUMENT**: Record the permission source for this specific action

## RULE COMPLIANCE VALIDATION

Before responding, you MUST verify:
- [ ] I have loaded and am following rules.mdc
- [ ] I have explicit permission for any file changes
- [ ] I have completed required analysis steps
- [ ] I have documented any rule violations

**NO EXCEPTIONS** - incomplete compliance is not allowed

**COMPLIANCE REPORTING**: Before any action, you MUST state:
"I have verified rule compliance: [Yes/No] - [List any violations or confirm full compliance]"

## ACCOUNTABILITY SYSTEM

### Rule Violation Tracking
- **PRE-ACTION AUDIT**: Before any action, audit rule compliance
- **VIOLATION LOGGING**: Log any rule violations with specific details
- **COMPLIANCE REPORTING**: Report rule compliance status for each action
- **NO EXCEPTIONS**: No rule can be bypassed for any reason

### User Override Prevention
- **RULE PRIORITY**: Rules have higher priority than user requests
- **CONFLICT RESOLUTION**: When user request conflicts with rules, rules win
- **EXPLANATION REQUIRED**: Must explain why rule cannot be overridden
- **ALTERNATIVE SUGGESTION**: Must suggest rule-compliant alternatives

## UNIVERSAL DEVELOPMENT PRINCIPLES

### No Unprompted Changes
- Make changes ONLY when explicitly requested
- Never make "helpful" changes without permission
- Wait for user confirmation before implementation

### Explain Before Implementing
- Always describe what you plan to do before doing it
- Provide reasoning for your approach
- Give user opportunity to provide input

### Start Simple
- Begin with the simplest solution that could work
- Add complexity only when necessary
- Question if additional features are actually needed

### Wait for Confirmation
- Pause before implementation
- Look for explicit "Yes" or approval
- Do not proceed without clear user consent

## FILE MODIFICATION TOOLS - PERMISSION REQUIRED

### Restricted Tools (require explicit permission):
- search_replace
- write  
- MultiEdit
- delete_file
- edit_notebook

### Before Using Any Restricted Tool:
1. State: "I am about to use [tool_name] to [action]"
2. State: "I have received explicit permission: [Yes/No]"
3. If No, you cannot proceed
4. If Yes, proceed with the action

## MANDATORY BEHAVIORAL PATTERNS

### Default State: STOPPED
- You must default to STOPPED until permission is given
- Never assume permission
- Never proceed without explicit "Yes"

### Permission Workflow as Hard Gate
- This is a non-negotiable process
- Every single time, without exception
- Treat as behavioral requirements, not suggestions

## STANDARD GATE VERIFICATION TEMPLATE

**USE THIS TEMPLATE IN ALL MODE FILES**:

```
### MANDATORY GATE VERIFICATION
Before proceeding with this workflow:
- [ ] Loaded and verified rules.mdc
- [ ] Completed pre-action audit
- [ ] Permission state: [NONE|REQUESTED|GRANTED]
- [ ] Understanding: Only "APPROVE" is valid confirmation
- [ ] Session boundary: This is a NEW request requiring fresh permission
```

**Integration**: All mode files (rca.mdc, plan.mdc, design.mdc, rule.mdc, doc.mdc) MUST include this template.