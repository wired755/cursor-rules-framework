---
description: "Root cause analysis mode for debugging and problem solving"
applyWhen: ["@rca.mdc"]
priority: 2
---

# Root Cause Analysis Mode

## @rca.mdc + RCA Mode
**Objective**: Find simple, direct fixes for problems
**Trigger**: When user reports an error or problem

## ðŸš¨ MANDATORY GATE VERIFICATION ðŸš¨

Before proceeding with RCA workflow:
- [ ] Loaded and verified rules.mdc
- [ ] Completed pre-action audit
- [ ] Permission state: [NONE|REQUESTED|GRANTED]
- [ ] Understanding: Only "APPROVE" is valid confirmation
- [ ] Session boundary: This is a NEW request requiring fresh permission

**ENFORCEMENT**: Cannot proceed with workflow until this verification is complete.

## RCA WORKFLOW
### 1. Load Context
- Load mandatory operational rules: `@rules.mdc`
- Load mode-specific behaviors: `@troubleshooting.mdc`
- Load project context if needed (optional): `@project.mdc`

### 2. Problem Analysis
- **Understand the Error**: What exactly went wrong
- **Check Context**: When and where did it happen
- **Identify Symptoms**: What behavior indicates the problem
- **Gather Information**: Error messages, logs, recent changes

**GATE CHECKPOINT 1**: Analysis complete - No permission required yet, continue to investigation.

### 3. Root Cause Investigation
- **Start Simple**: Check for simple format or logical errors
- **Trace the Flow**: Follow data from source to error
- **Check Templates**: UI issues often start with template problems
- **Verify Assumptions**: Don't assume - verify how things actually work

**GATE CHECKPOINT 2**: Root cause identified - No permission required yet, continue to solution design.

### 4. Solution Design
- **Find the Simplest Fix**: 2-3 line solutions before architectural changes
- **Test the Theory**: Verify the root cause before implementing
- **Plan the Fix**: Step-by-step implementation
- **Consider Prevention**: How to avoid similar issues

**GATE CHECKPOINT 3**: Solution designed - PERMISSION REQUIRED BEFORE IMPLEMENTATION.
**Permission State**: Must transition to REQUESTED.

### 5. Impact Analysis
- **Check Dependencies**: What other code depends on this change
- **Verify Side Effects**: Will this fix break other functionality
- **Test Related Features**: Check similar patterns that might be affected
- **Validate Integration**: Ensure fix works with existing code

### 6. Similar Error Detection
- **Search for Similar Patterns**: Look for same error type in other files
- **Check Common Locations**: Templates, views, models, forms with similar logic
- **Identify Root Pattern**: If found elsewhere, fix the pattern, not just the instance
- **Document Pattern**: Note where similar issues might occur

### 7. Respond to User

## MANDATORY RCA RESPONSE STRUCTURE
When in RCA mode, you MUST complete ALL sections:

#### ERROR SUMMARY (mandatory)
[Brief description of error and context]

#### ROOT CAUSE ANALYSIS (mandatory)
[Detailed analysis of the underlying cause]

#### PROPOSED FIX (mandatory)
[Simple, direct solution with implementation steps]

#### IMPACT ANALYSIS (mandatory)
- **Dependencies**: [What other code depends on this change]
- **Side Effects**: [Will this fix break other functionality]
- **Related Features**: [Similar patterns that might be affected]
- **Integration**: [How fix works with existing code]

#### PREVENTION STRATEGIES (mandatory)
[If similar errors found, how to avoid similar issues in the future]

#### VALIDATION CHECKLIST (mandatory)
- [ ] `rules.mdc` was read before any actions, and critical rules followed.  
- [ ] **SESSION BOUNDARY**: Verified this is a new request requiring fresh permission
- [ ] **NO CARRYOVER**: Did not assume permission from previous requests
- [ ] Analyzed error message and context
- [ ] Checked data format issues first
- [ ] Verified template context before backend
- [ ] Searched for similar errors elsewhere in project
- [ ] Analyzed impact on other functionality
- [ ] Identified simplest possible fix
- [ ] Considered prevention strategies

#### CONFIRMATION REQUIRED (mandatory)

**PERMISSION STATE**: REQUESTED

ðŸš¨ **CRITICAL: I will NOT make changes until you type "APPROVE"** ðŸš¨

To proceed with implementation, you must type exactly: **"APPROVE"**

- **FRESH PERMISSION REQUIRED**: This is a new request requiring explicit permission
- **NO CARRYOVER**: Cannot assume permission from previous requests
- **STANDARD PHRASE**: Only "APPROVE" is accepted (not "yes", "ok", etc.)
- NO code changes without explicit "APPROVE"
- NO file modifications without "APPROVE"
- NO implementation until you type "APPROVE"
- WAIT for your explicit "APPROVE" command

**ENFORCEMENT**: Incomplete RCA responses are not allowed